<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.koron.indicator.mapper.AddIndicatorMapper">
	<insert id="addZoneLossDIndicDataBatch" parameterType="java.util.List"
		useGeneratedKeys="false">
		insert into "ANA_zone_day"
		(
		"analysisDate",code,"zoneNo","zoneRank","analysisValue",value,method,"createTime","updateTime")
		values
		<foreach collection="list" item="item" index="index"
			separator=",">
			(
			#{item."analysisDate"},
			#{item.code},
			#{item."zoneNo"},
			#{item."zoneRank"},
			#{item."analysisValue"},
			#{item.value},
			#{item.method},
			current_timestamp,
			current_timestamp
			)
		</foreach>
	</insert>
	
	<insert id="addZoneLossMIndicDataBatch" parameterType="java.util.List"
		useGeneratedKeys="false">
		insert into "ANA_zone_month"
		(
		"yearMonth",code,"zoneNo","zoneRank","analysisValue",value,method,"createTime","updateTime")
		values
		<foreach collection="list" item="item" index="index"
			separator=",">
			(
			#{item."yearMonth"},
			#{item.code},
			#{item."zoneNo"},
			#{item."zoneRank"},
			#{item."analysisValue"},
			#{item.value},
			#{item.method},
			current_timestamp,
			current_timestamp
			)s
		</foreach>
	</insert>
	
	<insert id="addZoneLossYIndicDataBatch" parameterType="java.util.List"
		useGeneratedKeys="false">
		insert into "ANA_zone_month"
		(
		year,code,"zoneNo","zoneRank","analysisValue",value,method,"createTime","updateTime")
		values
		<foreach collection="list" item="item" index="index"
			separator=",">
			(
			#{item.year},
			#{item.code},
			#{item.zoneNo},
			#{item.zoneRank},
			#{item.analysisValue},
			#{item.value},
			#{item.method},
			current_timestamp,
			current_timestamp
			)
		</foreach>
		on conflict(year,code,"zoneNo")
		do update set "analysisValue"= #{item.analysisValue},
		value = #{item.value},
	    "updateTime = current_timestamp
	</insert>
</mapper>